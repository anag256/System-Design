<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

<!-- Vulnerable code -->
<div> Welcome <span id="username"></span></div>

    <script>
        function setCookie(name,value,days){
            const date=new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000))
            const expires="expires="+date.toUTCString();
            document.cookie=name+"="+value+";"+expires+";path=/";
            console.log('cooke'+document.cookie);
            //set a cookie with name example cookie and value hello cookie with a expire of 7days

        }
        setCookie("exampleCookie","Hello cookie!",7)
    </script>

    <script>
        const params=new URLSearchParams(window.location.search);
        const name=params.get('name');
        document.getElementById("username").innerHTML=name;
    </script>

    <!-- UNAUTHORIZED ACTIVITES - you are able to create a post on behalf of user with you own content -->
    <!-- ?name=<img src="error" onerror="createPost('Hack_title,Hack_description')" />-->
    <script>
        function createPost(title,description){
            var xhr=new XMLHttpRequest();
            xhr.open("POST",'/post',true);
            console.log(document.cookie);
            xhr.withCredentials=true;;
            xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xhr.send(`txtName=${title}&mtxMessage=${description}`)
        }
    </script>
</body>
</html>